<!DOCTYPE html><html xmlns="http://www.w3.org/1999/html">  <head>    <title>WebSocket Example</title>  </head>  <body>    登录用户ID：<input type="text" id="sendUserId" /></br>    接受用户ID：<input type="text" id="receivedUserId" /></br>    发送消息内容：<input type="text" id="messageInput" /></br>    接受消息内容：<input type="text" id="messageReceive" /></br>    <button onclick="sendMessage()">Send</button>    <script>      var roomId = "123456";      var UserId = sessionStorage.getItem("userId");      document.getElementById("sendUserId").value = UserId;      var wsUrl = "ws://172.22.31.10:8085/websocket/" + UserId;      socket = new WebSocket(wsUrl);      socket.onopen = function (event) {        console.log("WebSocket is open now.");        let loginInfo = {          msgType: 1, //登录消息          senderId: UserId,          roomId: roomId,          msgBody: {},        };        socket.send(JSON.stringify(loginInfo));      };      socket.onmessage = function (event) {        var message = event.data;        console.log("Received message: " + message);        messageReceive.value = message;      };      socket.onclose = function (event) {        console.log("WebSocket is closed now.");      };      function sendMessage() {        var message = document.getElementById("messageInput").value;        var receivedUserId = document.getElementById("receivedUserId").value;        let operateInfo = {          msgType: 2, //文字消息          senderId: UserId,          receiverId: receivedUserId,          roomId: roomId,          msgBody: message        };        socket.send(JSON.stringify(operateInfo));      }      //重复发送心跳包保持链接      setInterval(() => {        let HeartBeat = {          msgType: 0, //心跳消息          senderId: UserId,          receiverId: "",          roomId: "",          msgBody: ping        };        socket.send(JSON.stringify(HeartBeat));      }, 30000);    </script>  </body></html>